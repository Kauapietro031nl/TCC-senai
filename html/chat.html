<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChatBot Manual do Sistema</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../css/chat.css">
</head>

<body>
    <h1><i class="fas fa-robot"></i> ChatBot - Manual do Sistema</h1>
    
    <div id="chat-container">
        <div id="chat-header">
            <i class="fas fa-robot"></i>
            <span>Assistente Virtual</span>
        </div>
        
        <div id="chat"></div>
        
        <div class="quick-actions">
            <button class="quick-action-btn" data-question="Visualizar estoque"><i class="fas fa-boxes"></i> Visualizar estoque</button>
            <button class="quick-action-btn" data-question="Como editar um produto?"><i class="fas fa-edit"></i> Editar produto</button>
            <button class="quick-action-btn" data-question="Como cadastrar pe√ßas?"><i class="fas fa-plus-circle"></i> Cadastrar pe√ßas</button>
            <button class="quick-action-btn" data-question="Dicas para utiliza√ß√£o"><i class="fas fa-lightbulb"></i> Dicas</button>
        </div>
        
        <div id="input-container">
            <input type="text" id="user-input" placeholder="Digite sua d√∫vida sobre o sistema..." autocomplete="off">
            <button id="send-btn"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <script>
        const chatDiv = document.getElementById("chat");
        const userInput = document.getElementById("user-input");
        const sendBtn = document.getElementById("send-btn");
        const quickActionBtns = document.querySelectorAll(".quick-action-btn");

        // Formatar a data para exibi√ß√£o
        function formatTime(date) {
            return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        }

        // Mostrar indicador de digita√ß√£o
        function showTypingIndicator() {
            const typingDiv = document.createElement("div");
            typingDiv.className = "typing-indicator";
            typingDiv.innerHTML = `
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
            `;
            chatDiv.appendChild(typingDiv);
            chatDiv.scrollTop = chatDiv.scrollHeight;
            return typingDiv;
        }

        // Remover indicador de digita√ß√£o
        function removeTypingIndicator(typingDiv) {
            if (typingDiv && typingDiv.parentNode) {
                typingDiv.parentNode.removeChild(typingDiv);
            }
        }

        const documentationSections = {
            "menu": {
                title: "Menu Principal",
                content: `Ol√°! Sou o Assistente do Sistema. Aqui est√£o os principais t√≥picos sobre os quais posso ajudar:<br><br>
                <strong>Fun√ß√µes do Sistema:</strong>
                <ul>
                    <li><a href="#" class="topic-link" data-topic="Fun√ß√£o do Sistema">Vis√£o geral do sistema</a></li>
                    <li><a href="#" class="topic-link" data-topic="Visualizar o Estoque">Visualizar estoque</a></li>
                    <li><a href="#" class="topic-link" data-topic="Buscando Produtos">Buscar produtos</a></li>
                </ul>
                
                <strong>Gerenciamento de Produtos:</strong>
                <ul>
                    <li><a href="#" class="topic-link" data-topic="Editando um Produto">Editar produto</a></li>
                    <li><a href="#" class="topic-link" data-topic="Excluindo um Produto">Excluir produto</a></li>
                    <li><a href="#" class="topic-link" data-topic="Baixando os Dados da tabela">Exportar dados</a></li>
                </ul>
                
                <strong>Cadastro de Pe√ßas:</strong>
                <ul>
                    <li><a href="#" class="topic-link" data-topic="Cadastro de Pe√ßas">Vis√£o geral</a></li>
                    <li><a href="#" class="topic-link" data-topic="Passo a Passo para Cadastrar Pe√ßas">Passo a passo</a></li>
                    <li><a href="#" class="topic-link" data-topic="Adicionando uma Nova Pe√ßa">Adicionar pe√ßa</a></li>
                </ul>
                
                <strong>Dicas e Melhores Pr√°ticas:</strong>
                <ul>
                    <li><a href="#" class="topic-link" data-topic="Dicas para Utiliza√ß√£o Eficiente">Dicas de uso</a></li>
                </ul>
                
                <p>Clique em um t√≥pico ou digite sua d√∫vida diretamente.</p>`,
                isMenu: true
            },
            "Fun√ß√£o do Sistema": {
                title: "Fun√ß√£o do Sistema",
                content: `<strong>O Sistema de Gest√£o de Estoque</strong> foi desenvolvido para otimizar a gest√£o de invent√°rio de produtos. Ele permite:
                <ul>
                    <li>Visualizar, editar, excluir e exportar dados de maneira intuitiva</li>
                    <li>Ajudar empresas a manter o controle de seus estoques de forma organizada e pr√°tica</li>
                    <li>Cadastrar m√∫ltiplas pe√ßas simultaneamente</li>
                    <li>Gerar relat√≥rios em diferentes formatos</li>
                </ul>
                <p>Nossa miss√£o √© proporcionar uma solu√ß√£o eficiente e f√°cil de usar para empres√°rios e suas equipes, tornando a gest√£o de estoque mais √°gil e precisa.</p>
                <p><em>Dica:</em> Voc√™ pode digitar "menu" a qualquer momento para voltar aos t√≥picos principais.</p>`
            },
            "Visualizar o Estoque": {
                title: "Visualizar o Estoque",
                content: `A <strong>tela principal</strong> do sistema exibe uma tabela completa com todos os produtos em estoque:<br><br>
                
                <strong>Colunas da tabela:</strong>
                <ul>
                    <li><strong>C√≥digo:</strong> Identificador √∫nico do produto no estoque</li>
                    <li><strong>Nome:</strong> Nome do produto para f√°cil identifica√ß√£o</li>
                    <li><strong>Quantidade:</strong> Quantidade dispon√≠vel no estoque</li>
                    <li><strong>Descri√ß√£o:</strong> Informa√ß√µes detalhadas sobre o produto</li>
                    <li><strong>Localiza√ß√£o:</strong> Onde o produto est√° armazenado no estoque</li>
                    <li><strong>A√ß√µes:</strong> √çcones para editar (‚úèÔ∏è) ou excluir (üóëÔ∏è) o produto</li>
                </ul>
                
                <p>Essa tabela proporciona uma visualiza√ß√£o clara e r√°pida do estoque, facilitando o controle dos itens.</p>
                <p><i class="fas fa-lightbulb"></i> <em>Dica r√°pida:</em> Use o scroll horizontal se a tabela for muito larga para sua tela.</p>`
            },
            "Buscando Produtos": {
                title: "Buscando Produtos",
                content: `A fun√ß√£o de <strong>pesquisa</strong> permite localizar rapidamente um produto no estoque.<br><br>
                
                <strong>Como buscar:</strong>
                <ol>
                    <li>Digite o nome ou o c√≥digo do produto na barra de pesquisa, localizada na parte superior da interface</li>
                    <li>Pressione <kbd>Enter</kbd> ou clique no √≠cone de lupa para ver os resultados</li>
                </ol>
                
                <p>A busca √© <strong>eficiente e r√°pida</strong>, garantindo que voc√™ encontre o produto desejado em segundos, mesmo em estoques com muitos itens.</p>
                <p><i class="fas fa-exclamation-triangle"></i> <em>Importante:</em> A busca √© sens√≠vel a acentos e mai√∫sculas/min√∫sculas.</p>`
            },
            "Editando um Produto": {
                title: "Editando um Produto",
                content: `Para <strong>alterar</strong> as informa√ß√µes de um produto, siga estes passos:<br><br>
                
                <ol>
                    <li>Clique no √≠cone de l√°pis (<i class="fas fa-pencil-alt"></i>) ao lado do produto que deseja editar</li>
                    <li>Um formul√°rio ser√° exibido permitindo alterar:
                        <ul>
                            <li>Nome do produto</li>
                            <li>Quantidade em estoque</li>
                            <li>Descri√ß√£o detalhada</li>
                            <li>Localiza√ß√£o no armaz√©m</li>
                        </ul>
                    </li>
                    <li>Ap√≥s realizar as altera√ß√µes, clique em <strong>Salvar</strong> para confirmar</li>
                </ol>
                
                <p><i class="fas fa-info-circle"></i> <strong>Observa√ß√£o:</strong> O c√≥digo do produto n√£o pode ser alterado ap√≥s o cadastro inicial.</p>
                <p><i class="fas fa-lightbulb"></i> <em>Dica:</em> Voc√™ pode pressionar <kbd>Esc</kbd> para cancelar a edi√ß√£o.</p>`
            },
            "Excluindo um Produto": {
                title: "Excluindo um Produto",
                content: `Para <strong>remover</strong> um produto do estoque:<br><br>
                
                <ol>
                    <li>Clique no √≠cone de lixeira (<i class="fas fa-trash-alt"></i>) ao lado do produto que deseja excluir</li>
                    <li>O sistema exibir√° uma confirma√ß√£o para evitar exclus√µes acidentais</li>
                    <li>Clique em <strong>Confirmar</strong> para finalizar a exclus√£o</li>
                </ol>
                
                <p><i class="fas fa-exclamation-triangle"></i> <strong>Aviso importante:</strong> Ao excluir um produto, todas as informa√ß√µes relacionadas a ele ser√£o permanentemente removidas do sistema. Esta a√ß√£o n√£o pode ser desfeita.</p>
                <p><i class="fas fa-lightbulb"></i> <em>Sugest√£o:</em> Considere exportar seus dados regularmente como backup.</p>`
            },
            "Baixando os Dados da tabela": {
                title: "Exportando Dados",
                content: `Voc√™ pode <strong>exportar</strong> os dados do estoque em diferentes formatos:<br><br>
                
                <strong>Formatos dispon√≠veis:</strong>
                <ul>
                    <li><strong>XLS (Excel):</strong> Ideal para an√°lise e manipula√ß√£o dos dados em planilhas</li>
                    <li><strong>PDF:</strong> Perfeito para impress√£o ou compartilhamento de relat√≥rios</li>
                </ul>
                
                <strong>Como exportar:</strong>
                <ol>
                    <li>Localize os bot√µes de exporta√ß√£o na parte superior da tela</li>
                    <li>Clique no formato desejado (XLS ou PDF)</li>
                    <li>O sistema gerar√° o arquivo automaticamente</li>
                    <li>Salve o arquivo no seu computador quando solicitado</li>
                </ol>
                
                <p><i class="fas fa-lightbulb"></i> <em>Dica avan√ßada:</em> Voc√™ pode filtrar a tabela antes de exportar para gerar relat√≥rios espec√≠ficos.</p>`
            },
            "Dicas para Utiliza√ß√£o Eficiente": {
                title: "Dicas para Uso Eficiente",
                content: `<strong>Melhores pr√°ticas</strong> para aproveitar ao m√°ximo o sistema:<br><br>
                
                <ul>
                    <li><strong>Pesquisa eficiente:</strong> Use termos espec√≠ficos na busca para resultados mais r√°pidos</li>
                    <li><strong>Atalhos:</strong> Pressione <kbd>Enter</kbd> para confirmar a√ß√µes e <kbd>Esc</kbd> para cancelar</li>
                    <li><strong>Organiza√ß√£o:</strong> Mantenha os nomes dos produtos consistentes para facilitar buscas</li>
                    <li><strong>Backup:</strong> Exporte seus dados regularmente para manter c√≥pias de seguran√ßa</li>
                    <li><strong>Treinamento:</strong> Capacite sua equipe para usar todas as funcionalidades do sistema</li>
                </ul>
                
                <p><i class="fas fa-star"></i> <em>Dica profissional:</em> Estabele√ßa um padr√£o para c√≥digos e localiza√ß√µes para manter seu estoque sempre organizado.</p>`
            },
            "Cadastro de Pe√ßas": {
                title: "Cadastro de Pe√ßas",
                content: `O sistema permite o <strong>cadastro simult√¢neo</strong> de v√°rias pe√ßas. Para cada pe√ßa, informe:<br><br>
                
                <strong>Dados obrigat√≥rios:</strong>
                <ul>
                    <li><strong>C√≥digo:</strong> Identificador √∫nico (5 caracteres)</li>
                    <li><strong>Nome:</strong> Nome descritivo da pe√ßa</li>
                    <li><strong>Quantidade:</strong> N√∫mero em estoque</li>
                    <li><strong>Descri√ß√£o:</strong> Detalhes sobre a pe√ßa</li>
                    <li><strong>Localiza√ß√£o:</strong> Onde a pe√ßa est√° armazenada</li>
                </ul>
                
                <p>Essas informa√ß√µes ser√£o enviadas para o servidor para processamento e armazenamento.</p>
                <p><i class="fas fa-lightbulb"></i> <em>Dica:</em> Voc√™ pode cadastrar at√© 50 pe√ßas de uma s√≥ vez.</p>`
            },
            "Passo a Passo para Cadastrar Pe√ßas": {
                title: "Passo a Passo para Cadastro",
                content: `<strong>Fluxo completo</strong> para cadastrar pe√ßas no sistema:<br><br>
                
                <ol>
                    <li>Acesse a se√ß√£o <strong>"Cadastramento de Pe√ßas"</strong></li>
                    <li>Voc√™ ver√° um formul√°rio com uma tabela vazia</li>
                    <li>Clique em <strong>"Adicionar Linha"</strong> para cada nova pe√ßa</li>
                    <li>Preencha todos os campos obrigat√≥rios</li>
                    <li>Revise as informa√ß√µes inseridas</li>
                    <li>Clique em <strong>"Cadastrar Todos"</strong> para enviar os dados</li>
                </ol>
                
                <p><i class="fas fa-check-circle"></i> O sistema confirmar√° o cadastro bem-sucedido com uma mensagem.</p>
                <p><i class="fas fa-exclamation-circle"></i> Erros ser√£o destacados para corre√ß√£o antes do envio.</p>`
            },
            "Adicionando uma Nova Pe√ßa": {
                title: "Adicionando uma Nova Pe√ßa",
                content: `Para <strong>incluir</strong> uma nova pe√ßa no cadastro em lote:<br><br>
                
                <ol>
                    <li>Clique no bot√£o <strong>"Adicionar Linha"</strong></li>
                    <li>Preencha os campos da nova linha:
                        <ul>
                            <li><strong>C√≥digo:</strong> 5 caracteres (letras e n√∫meros)</li>
                            <li><strong>Nome:</strong> Identifica√ß√£o clara da pe√ßa</li>
                            <li><strong>Quantidade:</strong> N√∫mero inteiro positivo</li>
                            <li><strong>Descri√ß√£o:</strong> Detalhes relevantes</li>
                            <li><strong>Localiza√ß√£o:</strong> Setor/prateleira/box</li>
                        </ul>
                    </li>
                    <li>Repita o processo para cada pe√ßa adicional</li>
                </ol>
                
                <p><i class="fas fa-lightbulb"></i> <em>Dica:</em> Voc√™ pode usar o bot√£o <strong>Tab</strong> para navegar rapidamente entre os campos.</p>`
            },
            "Removendo uma linha": {
                title: "Removendo uma Linha",
                content: `Para <strong>excluir</strong> uma linha do cadastro em lote:<br><br>
                
                <ol>
                    <li>Localize a linha que deseja remover</li>
                    <li>Clique no bot√£o <strong>"Remover"</strong> ao lado da pe√ßa</li>
                    <li>A linha ser√° exclu√≠da imediatamente</li>
                </ol>
                
                <p><i class="fas fa-exclamation-triangle"></i> <strong>Importante:</strong> Esta a√ß√£o n√£o pode ser desfeita. Os dados da linha ser√£o perdidos se n√£o tiverem sido cadastrados.</p>
                <p><i class="fas fa-check-circle"></i> <em>Verifica√ß√£o:</em> Somente ser√° poss√≠vel cadastrar se todas as linhas restantes estiverem completamente preenchidas.</p>`
            },
            "Cadastro de V√°rias Pe√ßas": {
                title: "Cadastro em Lote",
                content: `O sistema permite o <strong>cadastro simult√¢neo</strong> de m√∫ltiplas pe√ßas:<br><br>
                
                <ul>
                    <li>Adicione quantas linhas necess√°rias (at√© 50 por lote)</li>
                    <li>Todas as linhas devem estar completamente preenchidas</li>
                    <li>Voc√™ pode mesclar diferentes tipos de pe√ßas no mesmo lote</li>
                    <li>O sistema validar√° todos os dados antes do cadastro</li>
                </ul>
                
                <p><i class="fas fa-lightbulb"></i> <em>Dica de produtividade:</em> Prepare seus dados antecipadamente em uma planilha para agilizar o cadastro em massa.</p>
                <p><i class="fas fa-exclamation-circle"></i> Campos em branco ou inv√°lidos impedir√£o o cadastro de todo o lote.</p>`
            },
            "Confirmando o Cadastro": {
                title: "Confirmando o Cadastro",
                content: `Etapa final para <strong>armazenar</strong> as pe√ßas no sistema:<br><br>
                
                <ol>
                    <li>Verifique se todas as informa√ß√µes est√£o corretas</li>
                    <li>Clique no bot√£o <strong>"Cadastrar Todos"</strong></li>
                    <li>Aguarde o processamento pelo servidor</li>
                    <li>Em caso de sucesso, voc√™ ver√°:
                        <ul>
                            <li>Mensagem de confirma√ß√£o</li>
                            <li>Limpeza autom√°tica do formul√°rio</li>
                            <li>Op√ß√£o para iniciar novo cadastro</li>
                        </ul>
                    </li>
                    <li>Se houver erros:
                        <ul>
                            <li>Os campos problem√°ticos ser√£o destacados</li>
                            <li>Mensagens explicativas ser√£o exibidas</li>
                            <li>Corrija os problemas e tente novamente</li>
                        </ul>
                    </li>
                </ol>
                
                <p><i class="fas fa-sync-alt"></i> <em>Status:</em> O √≠cone de carregamento indicar√° quando o sistema est√° processando seu cadastro.</p>`
            }
        };

        function searchDatabase(question) {
            const normalizedQuestion = question.toLowerCase().trim();
            
            // Respostas diretas para cumprimentos
            if (/^(oi|ol√°|ola|hello|bom dia|boa tarde|boa noite)$/i.test(normalizedQuestion)) {
                const greetings = ["Ol√°!", "Oi! Como posso ajudar?", "Bom dia! Em que posso ajudar?", "Boa tarde! Pergunte sobre o sistema.", "Boa noite! Sou o assistente do sistema."];
                return {
                    title: "Sauda√ß√£o",
                    content: greetings[Math.floor(Math.random() * greetings.length)]
                };
            }
            
            if (/^(obrigado|obrigada|valeu|agrade√ßo)$/i.test(normalizedQuestion)) {
                return {
                    title: "Agradecimento",
                    content: "De nada! Estou aqui para ajudar. Se tiver mais d√∫vidas, √© s√≥ perguntar!"
                };
            }
            
            if (/^(menu|voltar|in√≠cio|inicio|home)$/i.test(normalizedQuestion)) {
                return documentationSections["menu"];
            }
            
            if (/^(ajuda|socorro|n√£o sei|n√£o entendo|como funciona)$/i.test(normalizedQuestion)) {
                return {
                    title: "Ajuda",
                    content: `Posso te ajudar com informa√ß√µes sobre o sistema de gest√£o de estoque. Voc√™ pode:
                    <ul>
                        <li>Perguntar sobre fun√ß√µes espec√≠ficas</li>
                        <li>Usar os bot√µes de a√ß√£o r√°pida abaixo da conversa</li>
                        <li>Digitar "menu" para ver todos os t√≥picos</li>
                    </ul>
                    <p>Por exemplo, tente perguntar: "Como editar um produto?" ou "Como cadastrar v√°rias pe√ßas?"</p>`
                };
            }

            const keywordMap = {
                "visualizar|estoque|ver produto|listar": "Visualizar o Estoque",
                "editar|alterar|modificar|mudar": "Editando um Produto",
                "excluir|remover|apagar|deletar": "Excluindo um Produto",
                "baixar|exportar|dados|planilha|pdf|excel|xls": "Baixando os Dados da tabela",
                "cadastrar|cadastro|registrar|nova pe√ßa": "Cadastro de Pe√ßas",
                "passo a passo|como fazer|instru√ß√µes": "Passo a Passo para Cadastrar Pe√ßas",
                "adicionar|incluir|nova linha": "Adicionando uma Nova Pe√ßa",
                "remover linha|excluir linha|apagar linha": "Removendo uma linha",
                "confirmar|enviar|finalizar": "Confirmando o Cadastro",
                "pesquisar|buscar|procurar|encontrar": "Buscando Produtos",
                "dica|dicas|sugest√£o|melhor pr√°tica": "Dicas para Utiliza√ß√£o Eficiente",
                "fun√ß√£o|sistema|sobre|funcionalidade": "Fun√ß√£o do Sistema",
                "menu|t√≥picos|assuntos": "menu"
            };

            for (const keywords in keywordMap) {
                const regex = new RegExp(keywords, "i");
                if (regex.test(normalizedQuestion)) {
                    return documentationSections[keywordMap[keywords]];
                }
            }

            return {
                title: "N√£o entendi",
                content: `Desculpe, n√£o encontrei informa√ß√µes sobre "<strong>${question}</strong>".<br><br>
                Voc√™ pode tentar:
                <ul>
                    <li>Reformular sua pergunta</li>
                    <li>Verificar os t√≥picos dispon√≠veis digitando "menu"</li>
                    <li>Usar palavras-chave como "editar", "cadastrar" ou "exportar"</li>
                </ul>
                <p>Estou aqui para ajudar com d√∫vidas sobre o sistema de gest√£o de estoque.</p>`
            };
        }

        function addMessage(message, isUser = false) {
            const messageDiv = document.createElement("div");
            messageDiv.className = isUser ? "message user-message" : "message system-message";
            
            const now = new Date();
            const timestamp = formatTime(now);
            
            if (typeof message === 'object' && message.title) {
                messageDiv.innerHTML = `
                    <strong>${message.title}</strong><br>
                    ${message.content}
                    <div class="timestamp">${timestamp}</div>
                `;
            } else {
                messageDiv.innerHTML = `
                    ${message}
                    <div class="timestamp">${timestamp}</div>
                `;
            }
            
            chatDiv.appendChild(messageDiv);
            chatDiv.scrollTop = chatDiv.scrollHeight;
        }

        function handleUserInput() {
            const question = userInput.value.trim();
            if (!question) return;

            addMessage(question, true);
            userInput.value = "";
            
            const typingIndicator = showTypingIndicator();
            
            // Simular tempo de processamento
            setTimeout(() => {
                removeTypingIndicator(typingIndicator);
                const response = searchDatabase(question);
                addMessage(response);
            }, 1000 + Math.random() * 1000); // Tempo aleat√≥rio entre 1-2 segundos
        }

        // Event Listeners
        sendBtn.addEventListener("click", handleUserInput);
        
        userInput.addEventListener("keypress", (e) => {
            if (e.key === "Enter") {
                handleUserInput();
            }
        });

        quickActionBtns.forEach(btn => {
            btn.addEventListener("click", () => {
                const question = btn.getAttribute("data-question");
                userInput.value = question;
                handleUserInput();
            });
        });

        // Adicionar event listener para links de t√≥picos (adicionado dinamicamente)
        document.addEventListener("click", (e) => {
            if (e.target.classList.contains("topic-link")) {
                e.preventDefault();
                const topic = e.target.getAttribute("data-topic");
                addMessage(`Mostrar: ${topic}`, true);
                
                const typingIndicator = showTypingIndicator();
                
                setTimeout(() => {
                    removeTypingIndicator(typingIndicator);
                    const response = documentationSections[topic];
                    addMessage(response);
                }, 800);
            }
        });

        // Mensagem inicial
        setTimeout(() => {
            addMessage(documentationSections["menu"]);
        }, 500);
    </script>
</body>

</html>